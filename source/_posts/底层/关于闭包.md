---
title: 关于闭包
date: 2024-01-30
tags:
  - 随手记
  - 闭包
  - 所想
---
通俗易懂的讲,在C#中,闭包使用类实现,闭包函数变成了一个类,闭包中使用的变量(其定义域外的)变成了其成员变量,修改这个变量就是修改其成员变量,这样也就可以理解为什么修改闭包定义域以外的变量运行结果也会变化。

所以可以将闭包称为有状态的函数。

https://www.bilibili.com/video/BV1sY4y1U7BT

```cs
for (int i = 0; i < helper.skillFrameEventBase.eventName.Count; i++)  
{  
	string eventName = helper.skillFrameEventBase.eventName[i];  
	  
	if (EditorGUILayout.DropdownButton(new GUIContent(eventName), FocusType.Keyboard))  
	{  
		GenericMenu genericMenu = new GenericMenu();  
		//注册Menu的item  
		foreach (string item in list)  
		{  
			string name = item;  
			if (name == "") name = "未设置事件名称";  
			//设置内容、勾选条件和点击回调  
			genericMenu.AddItem(new GUIContent(name), item == eventName, () =>  
			{  
				Debug.Log(i);  
				helper.skillFrameEventBase.eventName[i] = item;  
				helper.OnValidate();  
			});  
		}  
		//显示菜单  
		genericMenu.ShowAsContext();  
	}  
}
```