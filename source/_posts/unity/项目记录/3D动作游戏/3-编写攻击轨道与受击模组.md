---
title: 3-编写攻击轨道与受击模组
date: 2024-05-07 10:04
tags:
---
## 攻击检测

使用**射线连续检测**攻击轨迹。

![](images/posts/Pasted%20image%2020240507142849.png)

![](images/posts/Pasted%20image%2020240507142845.png)

不仅仅是一条轨迹，可以定义**检测长度**、**检测密度**。

![](images/posts/Pasted%20image%2020240507161643.png)

定义攻击轨迹轨道，展示动作攻击轨迹。

## 受击盒子

采用在人物各个部位挂上Layer为HitBox作为受击盒子。在**运行时生成BoxCollider**并且更新对应位置。

![](images/posts/Pasted%20image%2020240507154209.png)

```cpp
public void Init()  
{  
    Collider = gameObject.AddComponent<BoxCollider>();  
    Collider.center = transform.InverseTransformPoint(center);  
    Collider.size = Box;  
}
public void Tick()  
{  
    if (Collider == null) return;  
    Collider.center = transform.InverseTransformPoint(center);  
}
```